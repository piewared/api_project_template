# Environment Configuration Template
# Copy this file to .env.production and fill in your actual values
# DO NOT commit .env.production to version control!

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
ENVIRONMENT=development

# =============================================================================
# DATABASE CONFIGURATION  
# =============================================================================

# PostgreSQL Configuration (Production)
# DATABASE_URL=postgresql://appuser:${POSTGRES_PASSWORD}@postgres:5432/appdb?sslmode=require
DATABASE_URL=sqlite:///./database.db

# Database Connection Pool
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20
POSTGRES_POOL_TIMEOUT=30

# =============================================================================
# INFRASTRUCTURE URLS
# =============================================================================
REDIS_URL=redis://localhost:6379/0
TEMPORAL_URL=localhost:7233
BASE_URL=http://localhost:8000

# Production Infrastructure (uncomment for production)
# REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0  
# TEMPORAL_URL=temporal:7233
# BASE_URL=https://yourdomain.com

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Security Settings (secrets read from files in production)
# SESSION_SECRET is read from secrets/session_signing_secret.txt
# CSRF_SECRET is read from secrets/csrf_signing_secret.txt

SESSION_TIMEOUT=3600
CSRF_TOKEN_LIFETIME=3600
SECURE_COOKIES=false  # Set to true in production
HTTPONLY_COOKIES=true
SAMESITE_COOKIES=lax  # Use 'strict' in production

### OIDC Configuration ###

# Global OIDC redirect URI (shared by all providers unless overridden)
OIDC_REDIRECT_URI=http://localhost:8000/auth/web/callback


# Example Google OIDC Provider credentials
OIDC_GOOGLE_CLIENT_ID=your-google-client-id
OIDC_GOOGLE_CLIENT_SECRET=your-google-client-secret

# Example Microsoft OIDC Provider credentials
OIDC_MICROSOFT_CLIENT_ID=your-microsoft-client-id
OIDC_MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# Example Keycloak OIDC Provider credentials
OIDC_KEYCLOAK_CLIENT_ID=your-keycloak-client-id
OIDC_KEYCLOAK_CLIENT_SECRET=your-keycloak-client-secret


### JWT Configuration ###

# JWT Audiences (who the tokens are intended for)
JWT_AUDIENCE=api://default
JWT_AUDIENCE_SECONDARY=http://localhost:8000

# JWT Session Configuration
SESSION_SIGNING_SECRET=your-session-signing-secret-CHANGE_ME!
SESSION_MAX_AGE=3600  # Session max age in seconds

# CSRF Configuration
CSRF_SIGNING_SECRET=your-csrf-signing-secret-CHANGE_ME!

# Allowed origin for CORS
CLIENT_ORIGIN=http://localhost:3000

# JWT Claims Mapping (optional - defaults work for most OIDC providers)
# JWT_CLAIM_USER_ID=sub
# JWT_CLAIM_EMAIL=email
# JWT_CLAIM_ROLES=roles
# JWT_CLAIM_GROUPS=groups
# JWT_CLAIM_SCOPE=scope
# JWT_CLAIM_NAME=name
# JWT_CLAIM_USERNAME=preferred_username